// retina.sass
// A helper mixin for applying high-resolution background images (http://www.retinajs.com)

// Submitted by Nathan Crank
// nathancrank.com

//Updated by Gabriel R. Sezefredo
// gabriel.sezefredo.com.br

@mixin at2x($path, $w: auto, $h: auto) {
    $position:-1;
    $length: str-length($path);
    @for $i from $length through $length - 10{
        @if $position == -1 {
            $char : str-slice($path, $i,$i);
            @if str-index($char, ".") == 1 {
                $position: $i;
            }
        }
    }
    @if $position != -1 {
        $ext: str-slice($path,$position + 1,$length);
        $path: str-slice($path,1,$position - 1);

        $at1x_path: "#{$path}.#{$ext}";
        $at2x_path: "#{$path}@2x.#{$ext}";

        background-image: url("#{$at1x_path}");

        @media all and (-webkit-min-device-pixel-ratio : 1.5),
        all and (-o-min-device-pixel-ratio: 3/2),
        all and (min--moz-device-pixel-ratio: 1.5),
        all and (min-device-pixel-ratio: 1.5) {
            background-image: url("#{$at2x_path}");
            background-size: $w $h;
        }
    } @else {
        background-image:url("#{$path}");
    }
}