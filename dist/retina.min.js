/*!
 * Retina.js v1.3.0
 *
 * Copyright 2014 Imulus, LLC
 * Released under the MIT license
 *
 * Retina.js is an open source script that makes it easy to serve
 * high-resolution images to devices with retina displays.
 */
!function(a){"use strict";function b(){}function c(a){return g.retinaImageSuffix+a}function d(a,b){if(this.path=a||"","undefined"!=typeof b&&null!==b)this.at_2x_path=b,this.perform_check=!1;else{if(void 0!==document.createElement){var d=document.createElement("a");d.href=this.path,d.pathname=d.pathname.replace(i,c),this.at_2x_path=d.href}else{var e=this.path.split("?");e[0]=e[0].replace(i,c),this.at_2x_path=e.join("?")}this.perform_check=!0}}function e(a){this.el=a,this.path=new d(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var b=this;this.path.check_2x_variant(function(a){a&&b.swap()})}var f="undefined"==typeof exports?window:exports,g={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};if(a)for(var h in a)a.hasOwnProperty(h)&&(g[h]=a[h]);f.Retina=b,b.configure=function(a){null===a&&(a={});for(var b in a)a.hasOwnProperty(b)&&(g[b]=a[b])},b.init=function(a){null===a&&(a=f),a.addEventListener("load",function(){var a,b,c=document.getElementsByTagName("img"),d=c.length,f=[];for(a=0;d>a;a+=1)b=c[a],b.getAttributeNode("data-no-retina")||b.src&&f.push(new e(b))})},b.isRetina=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return f.devicePixelRatio>1?!0:f.matchMedia&&f.matchMedia(a).matches?!0:!1};var i=/\.[\w\?=]+$/;f.RetinaImagePath=d,d.confirmed_paths=[],d.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},d.prototype.check_2x_variant=function(a){var b,c=this;return this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in d.confirmed_paths?a(!0):this.is_external()?a(!1):(b=new XMLHttpRequest,b.open("HEAD",this.at_2x_path),b.onreadystatechange=function(){if(4!==b.readyState)return a(!1);if(b.status>=200&&b.status<=399){if(g.check_mime_type){var e=b.getResponseHeader("Content-Type");if(null===e||!e.match(/^image/i))return a(!1)}return d.confirmed_paths.push(c.at_2x_path),a(!0)}return a(!1)},b.send(),void 0):a(!0)},f.RetinaImage=e,e.prototype.swap=function(a){function b(){c.el.complete?(g.force_original_dimensions&&(0===c.el.offsetWidth&&0===c.el.offsetHeight?(c.el.setAttribute("width",c.el.naturalWidth),c.el.setAttribute("height",c.el.naturalHeight)):(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight))),c.el.setAttribute("src",a)):setTimeout(b,5)}"undefined"==typeof a&&(a=this.path.at_2x_path);var c=this;b()},b.isRetina()&&b.init(f)}(RetinaJSConfig||{});